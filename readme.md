## 咕咕嘎嘎

### 数据库建立

在 ZYGC 那个项目中找到 create.sql 文件, 以此建立测试数据库即可

随后在本项目中，找到 `db.js` 文件，可以看到连接池配置，直接修改为你的数据库配置即可，当然最好还是在同级目录下面创建一个 `.env` 文件，示例内容如下

```js
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=cosmo
DB_NAME=Manager
JWT_SECRET='change_this_secret'(你的强随机密钥) // 这个是中间层用的，不配置也行
JWT_EXPIRES_IN=7d
```

### 后端服务部署

应该终端直接一个 `npm install` 安装完就可以了

如果有缺少模块的问题, 装一下下面的模块

```bash
npm install express mysql2 bcrypt jsonwebtoken dotenv express-validator
```

然后终端 `node server.js` 就能把后端服务启动了

#### ngrok 公网访问

> 这块不用管

```bash
ngrok http --url=marlyn-unalleviative-annabel.ngrok-free.dev 3000
```

#### 目前缺失的接口

设计一个后端接口，接受前端传入的偏好权重和筛选

其中，前端需要先进行修改，历年录取分数线改为占80%，生源因素和报考历史因素去除，也就是整个客观数据（历史录取分数线）占80%，主观数据占20%（其中目标地区、院校层次、专业方向按照偏好权重分得这20%）

​此外，还需要添加用户偏好的具体内容进行持久化保存，比如具体的目标地区（一个院校列表）、院校层次的倾向、专业方向的倾向（在后端查询时使用模糊匹配前后，比如“*计算机*”）；

在默认情况是，无筛选，根据用户在高考页面填写的高考位次和用户信息的省份（生源），在历年录取分数线表中进行查询，查询位次和近三年最低位次（由于数据问题，这三年认定为2017-2020年）进行回归分析后，相差在一定范围的院校（比如用户位次在300名内，范围为上下60名，300~1000内，范围为上下200名，1000~5000内，范围为上下300，5000~20000为上下1200，20000以上为上下2000）

以此筛选出匹配的院校，并计算录取概率百分比；然后根据前端传入的目标地区，院校层次，专业方向及权重，计算匹配度百分比；将二者百分比按照主客观权重进行计算求和，然后排序返回客户端院校信息及近三年录取分数及位次（由于数据问题，这三年认定为2017-2020年）、录取概率和匹配程度

前端根据概率分析是冲、稳、保哪一种，分配UI颜色
